<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="./font/iconfont.css" />
        <link rel="shortcut icon" href="https://y.gtimg.cn/mediastyle/mod/mobile/img/logo.svg?max_age=2592000" type="image/x-icon" />
        <title>QQ音乐-雷达</title>
        <style>
            * {
                margin: 0;
                padding: 0;
            }

            body {
                width: 100%;
                height: 100%;
                background-image: url(./img/sky.jpg);
                background-repeat: no-repeat;
                /* background-size: 100%; */
                background-size: cover;
                /* overflow: hidden; */
            }

            .title {
                display: flex;
                justify-content: space-between;
                width: 100%;
                align-items: center;
                height: 3rem;
            }

            .title-right {
                display: flex;
                align-items: center;
                justify-content: space-around;
                width: 6rem;
                height: 3rem;
            }

            .icon-down {
                font-size: 1.5rem;
                color: gray;
                margin-left: 1.8rem;
            }

            .icon-gengduo {
                font-size: 1.5rem;
                color: gray;
            }

            .icon-zhuanfa {
                font-size: 1.5rem;
                color: gray;
            }

            .time {
                margin-left: 1.5rem;
                margin-top: 0.5rem;
                /* width: 10rem; */
                height: 6rem;
            }

            .time-top {
                display: flex;
            }

            .time-top p {
                font-size: 0.9rem;
                font-weight: 700;
                margin-left: 0.5rem;
                margin-top: 0.25rem;
            }

            .time-top div {
                font-size: 0.7rem;
                margin-left: 0.5rem;
                margin-top: 0.3rem;
            }

            .time-top-left img {
                width: 3rem;
                height: 3rem;
            }

            .time-bottom div {
                font-size: 0.8rem;
                margin-left: 0.5rem;
            }

            .youth {
                font-weight: bold;
            }

            .picture {
                position: relative;
                margin-top: 0.6rem;
            }

            .guangpan {
                position: absolute;
                top: 0.5rem;
                left: 2rem;
                width: 13rem;
                height: 13rem;
            }

            .songname {
                position: absolute;
                top: 0.3rem;
                left: 1.9rem;
                border-radius: 0.25rem;
                width: 11.5rem;
                height: 12.5rem;
                z-index: 999 !important;
            }

            .lunxian {
                position: absolute;
                bottom: 15rem;
                display: flex;
                justify-content: space-between;
                width: 100%;
                align-items: center;
                height: 3rem;
            }

            .lunxian-right {
                display: flex;
                align-items: center;
                justify-content: space-around;
                width: 6rem;
                height: 3rem;
            }

            h3 {
                margin-left: 1.9rem;
            }

            .icon-Union {
                font-size: 1.5rem;
                color: gray;
            }

            .icon-shoucang {
                font-size: 1.9rem;
                color: gray;
            }

            .author {
                display: flex;
                position: absolute;
                bottom: 14.5rem;
                color: black;
                margin-left: 1.8rem;
                align-items: baseline;
            }

            .name {
                font-size: 0.9rem;
            }

            .frame {
                font-size: 0.6rem;
                margin-left: 0.5rem;
                border: 0.1rem solid;
                padding: 0.1rem 0.3rem;
                border-radius: 0.15rem;
                background-color: hwb(0 92% 3%);
                border: none;
            }

            .jianzhi p {
                position: absolute;
                bottom: 13.2rem;
                margin-left: 1.75rem;
                color: gray;
                font-size: 0.75rem;
            }

            .tubiao {
                display: flex;
                justify-content: space-between;
                /* width: 21rem; */
                height: 1.5rem;
                position: absolute;
                bottom: 9rem;
                left: 1.8rem;
            }

            .icon-mic {
                font-size: 1.5rem;
                color: gray;
            }

            .icon-yinxiao {
                font-size: 1.5rem;
                color: gray;
            }

            .icon-xiazai1 {
                font-size: 1.5rem;
                color: gray;
            }

            .icon-pinglun1 {
                font-size: 1.5rem;
                color: gray;
            }

            .icon-maohao {
                font-size: 1.5rem;
                color: gray;
            }

            .bottom1 {
                display: flex;
                justify-content: space-between;
                width: 21rem;
                height: 1.5rem;
                position: absolute;
                bottom: 2rem;
                left: 1.8rem;
            }

            .icon-danqu {
                font-size: 1.5rem;
                color: black;
            }

            .icon-shangyishou {
                font-size: 1.5rem;
                color: black;
            }

            .icon-zanting {
                margin-top: -1rem;
                font-size: 3rem;
                color: black;
            }

            .icon-bofang {
                margin-top: -1rem;
                font-size: 3rem;
                color: black;
            }

            .icon-xiayishou {
                font-size: 1.5rem;
                color: black;
            }

            .icon-leida {
                font-size: 1.5rem;
                color: black;
            }

            #progressBar {
                color: black;
                position: absolute;
                bottom: 3rem;
                left: 2rem;
                width: 325px;
                margin: 50px auto;
                height: 0.1rem;
            }

            /* 进度条样式 */
            input[type="range"] {
                width: 100%;
                height: 0.5rem;
                -webkit-appearance: none;
                /* 清除默认样式，针对 WebKit 内核浏览器 */
                appearance: none;
                /* 清除默认样式 */
                background-color: gray;
                outline: none;
                /* 去除轮廓线 */
                border-radius: 0.5rem;
            }

            /* 自定义滑块样式 */
            input[type="range"]::-webkit-slider-thumb {
                -webkit-appearance: none;
                /* 清除默认样式，针对 WebKit 内核浏览器 */
                appearance: none;
                /* 清除默认样式 */
                width: 0.5rem;
                height: 0.5rem;
                border-radius: 50%;
                /* 圆形滑块 */
                background-color: skyblue;
                cursor: pointer;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
                /* 阴影效果 */
            }

            #currentTime {
                position: absolute;
                top: 36rem;
                left: 2rem;
                font-size: 0.6rem;
                color: black;
            }

            #duration {
                position: absolute;
                top: 35.7rem;
                right: 1.2rem;
                font-size: 0.6rem;
                color: black;
            }

            .red {
                color: red;
            }
        </style>
    </head>
    <body>
        <div class="box">
            <div class="title">
                <div class="title-left">
                    <i class="iconfont icon-down"></i>
                </div>
                <div class="title-right">
                    <i class="iconfont icon-gengduo"></i>
                    <i class="iconfont icon-zhuanfa"></i>
                </div>
            </div>
            <div class="time">
                <div class="time-top">
                    <div class="time-top-left">
                        <img src="./img/cat.jpg" alt="" />
                    </div>
                    <div class="time-top-right">
                        <p>假期倒计时</p>
                        <div>开始期待吧</div>
                    </div>
                </div>
                <div class="time-bottom">
                    <div>距离<span class="youth">【母亲节】</span>还有<span id="mothersDay" class="youth"></span>天</div>
                    <div>距离<span class="youth">【端午节】</span>还有<span id="duanwu" class="youth"></span>天</div>
                </div>
            </div>
            <div class="picture">
                <img class="guangpan" src="./img/guangpan.webp" alt="" />
                <img class="songname" src="./img/songname.webp" alt="" />
            </div>
            <div class="lunxian">
                <div class="lunxian-left">
                    <h3>时间沦陷</h3>
                </div>
                <div class="lunxian-right">
                    <i class="iconfont icon-Union"></i>
                    <i class="iconfont icon-shoucang" onclick="toggleColor()" id="text"></i>
                </div>
            </div>
            <div class="author">
                <p class="name">赖湘文</p>
                <p class="frame">关注</p>
                <p class="frame">1k人在听</p>
                <p class="frame">HQ</p>
                <p class="frame">VIP</p>
                <p class="frame">原唱</p>
            </div>
            <div class="jianzhi">
                <p>监制：罗杨轩/周千与</p>
            </div>
            <div class="tubiao">
                <i class="iconfont icon-mic"></i>
                <i class="iconfont icon-yinxiao"></i>
                <i class="iconfont icon-xiazai1"></i>
                <i class="iconfont icon-pinglun1"></i>
                <i class="iconfont icon-maohao"></i>
            </div>
            <!-- 进度条 -->
            <input type="range" id="progressBar" min="0" max="100" value="0" step="0" />
            <!-- 显示当前播放时间和总时长 -->
            <div id="currentTime">0:00</div>
            <div id="duration">0:00</div>
            <div class="bottom1">
                <i class="iconfont icon-danqu"></i>
                <i class="iconfont icon-shangyishou"></i>
                <i class="iconfont icon-zanting" id="stop-click"></i>
                <i class="iconfont icon-xiayishou"></i>
                <i class="iconfont icon-leida"></i>
            </div>
            <audio src="./mp3/坠.mp3" style="display: none" controls id="audioPlayer"></audio>
        </div>
    </body>
    <script>
        //1) 计算距离母亲节还有多少天
        function calculateDaysUntilMothersDay() {
            var today = new Date();
            var year = today.getFullYear();
            // 母亲节在5月的第二个星期日
            var mothersDay = new Date(year, 4, 1);
            while (mothersDay.getDay() !== 0) {
                mothersDay.setDate(mothersDay.getDate() + 1);
            }
            mothersDay.setDate(mothersDay.getDate() + 7); // 下一个星期日
            var oneDay = 1000 * 60 * 60 * 24;
            var daysUntilMothersDay = Math.ceil((mothersDay.getTime() - today.getTime()) / oneDay);
            return daysUntilMothersDay;
        }

        // 计算距离端午节还有多少天
        function calculateDaysUntilDragonBoatFestival() {
            var today = new Date();
            var dragonBoatFestival = new Date(2024, 5, 10); // 2024年端午节日期
            var oneDay = 1000 * 60 * 60 * 24;
            var daysUntilDragonBoatFestival = Math.ceil((dragonBoatFestival.getTime() - today.getTime()) / oneDay);
            return daysUntilDragonBoatFestival;
        }

        // 更新页面上的倒计时
        function updateCountdown() {
            var daysMothersDay = calculateDaysUntilMothersDay();
            var daysDragonBoatFestival = calculateDaysUntilDragonBoatFestival();

            var mothersDayElement = document.getElementById("mothersDay");
            mothersDayElement.textContent = daysMothersDay;

            var dragonBoatFestivalElement = document.getElementById("duanwu");
            dragonBoatFestivalElement.textContent = daysDragonBoatFestival;
        }

        // 每秒钟更新一次倒计时
        setInterval(updateCountdown, 500);

        //2) 获取音频元素和图标,进度条
        const progressBar = document.getElementById("progressBar");
        const audioPlayer = document.getElementById("audioPlayer");
        const playPauseIcon = document.getElementById("stop-click");

        // 设置初始状态为播放
        let isPlaying = false;
        // 点击图标时的事件处理函数
        playPauseIcon.addEventListener("click", function () {
            // 切换播放状态
            isPlaying = !isPlaying;
            // 根据播放状态切换图标，并播放/暂停音频
            if (isPlaying) {
                audioPlayer.play();
                playPauseIcon.classList.remove("icon-zanting");
                playPauseIcon.classList.add("icon-bofang");
            } else {
                audioPlayer.pause();
                playPauseIcon.classList.remove("icon-bofang");
                playPauseIcon.classList.add("icon-zanting");
            }
        });

        // 3)监听音乐播放器的 timeupdate 事件，更新进度条和小圆点位置
        audioPlayer.addEventListener("timeupdate", function () {
            // 获取当前音乐播放时间和总时长
            const currentTime = audioPlayer.currentTime;
            const duration = audioPlayer.duration;

            // 计算当前播放时间在总时长中的百分比
            const progressPercentage = (currentTime / duration) * 100;

            // 更新进度条的值和小圆点的位置
            progressBar.value = progressPercentage;

            // 更新小圆点的样式，使其随着播放进度移动
            updateSliderThumb(progressBar);
            // 显示当前播放时间
            document.getElementById("currentTime").textContent = formatTime(currentTime);

            // 显示总时长
            document.getElementById("duration").textContent = formatTime(duration);
        });

        // 监听滑块的 input 事件，更新小圆点位置
        progressBar.addEventListener("input", function () {
            // 更新小圆点的样式
            updateSliderThumb(progressBar);

            // 设置音乐播放器的当前时间，以跳转到对应进度
            const seekTime = (progressBar.value / 100) * audioPlayer.duration;
            audioPlayer.currentTime = seekTime;
        });

        // 更新小圆点的位置
        function updateSliderThumb(slider) {
            // 获取滑块的值和最大值
            const value = slider.value;
            const max = slider.max;

            // 计算小圆点在滑块上的位置
            const position = (value / max) * (slider.offsetWidth - 20); // 20 是滑块宽度的一半

            // 设置小圆点的样式，使其在进度条上移动
            slider.style.setProperty("--thumb-position", `${position}px`);
        }
        // 格式化时间，将秒数转换为分:秒格式
        function formatTime(time) {
            const minutes = Math.floor(time / 60);
            let seconds = Math.floor(time % 60);
            seconds = seconds < 10 ? "0" + seconds : seconds; // 补零
            return `${minutes}:${seconds}`;
        }

        //点击收藏颜色变成红色，再点击取消收藏；
        var isRed = false;
        function toggleColor() {
            var text = document.getElementById("text");

            if (isRed) {
                text.classList.remove("red");
            } else {
                text.classList.add("red");
            }

            isRed = !isRed;
        }
    </script>
    <script src="../../public/js/mobileAdaption.js"></script>
</html>
